// Information about chakras with their properties
export const chakras = [
  {
    key: "crown",
    name: "Crown Chakra",
    sanskritName: "Sahasrara",
    color: "#9370DB",  // Violet
    location: "Top of the head",
    element: "Thought/Consciousness",
    description: "Connection to universal consciousness and spirituality",
    detailedDescription: "The Crown Chakra is your connection to higher consciousness and divine wisdom. When balanced, it opens you to spiritual insight and a sense of unity with all that is. This energy center governs your belief systems, spiritual connection, and understanding of your place in the universe.",
    physicalAssociations: ["Pineal gland", "Brain", "Central nervous system", "Cerebral cortex"],
    psychologicalAssociations: ["Spiritual connection", "Faith", "Inspiration", "Divine wisdom", "Transcendence"],
    balancedTraits: ["Spiritual connection", "Higher awareness", "Unity", "Wisdom", "Open-mindedness", "Presence", "Enlightenment"],
    imbalancedTraits: ["Disconnection", "Cynicism", "Over-intellectualization", "Spiritual obsession", "Apathy", "Materialism", "Rigid thinking"],
    overactiveSymptoms: ["Spiritual addiction", "Disconnection from physical reality", "Overthinking", "Obsessive thoughts", "Superiority complex"],
    underactiveSymptoms: ["Spiritual skepticism", "Feeling disconnected", "Lack of purpose or meaning", "Confusion", "Closed-mindedness"],
    balancedState: "When your Crown Chakra is balanced, you experience a sense of spiritual connection while remaining grounded in daily life. You feel a peaceful awareness of your place in the larger universe and can access higher wisdom when needed.",
    healingPractices: ["Meditation", "Silent reflection", "Visualization", "Prayer", "Yoga (especially headstands and shoulder stands)", "Sound healing with high frequency tones", "Aromatherapy with frankincense or lavender", "Amethyst and clear quartz crystals"],
    affirmations: ["I am connected to divine wisdom", "I am open to higher consciousness", "I trust in the universal intelligence that flows through me", "I am one with all that is"]
  },
  {
    key: "thirdEye",
    name: "Third Eye Chakra",
    sanskritName: "Ajna",
    color: "#483D8B",  // Indigo
    location: "Center of the forehead",
    element: "Light/Intuition",
    description: "Intuition, imagination, and clarity of thought",
    detailedDescription: "The Third Eye Chakra is your center of intuition, inner wisdom, and perception beyond the physical senses. It governs your ability to see clearly – both literally and metaphorically – helping you perceive patterns, possibilities, and deeper meanings in everyday experiences.",
    physicalAssociations: ["Eyes", "Pituitary gland", "Sinuses", "Lower brain", "Neurological system"],
    psychologicalAssociations: ["Intuition", "Perception", "Imagination", "Visualization", "Memory", "Dreams"],
    balancedTraits: ["Intuition", "Clarity", "Wisdom", "Imagination", "Good memory", "Discernment", "Insightfulness", "Deep perception"],
    imbalancedTraits: ["Overthinking", "Confusion", "Hallucinations", "Poor memory", "Indecisiveness", "Fantasy-prone", "Denial"],
    overactiveSymptoms: ["Headaches", "Hallucinations", "Nightmares", "Obsessive thoughts", "Difficulty concentrating on practical matters"],
    underactiveSymptoms: ["Poor memory", "Lack of imagination", "Difficulty visualizing", "Denial of intuitive insights", "Rigid thinking"],
    balancedState: "When your Third Eye Chakra is balanced, you trust your intuition while maintaining mental clarity. You can access your inner wisdom and perceive subtle patterns and connections, while remaining grounded in reality.",
    healingPractices: ["Visualization", "Dream work", "Meditation", "Star gazing", "Journaling insights", "Working with indigo-colored objects", "Aromatherapy with jasmine or rosemary", "Lapis lazuli and sodalite crystals"],
    affirmations: ["I trust my intuition", "I see clearly in all situations", "My perception goes beyond the physical world", "I am open to receiving divine guidance"]
  },
  {
    key: "throat",
    name: "Throat Chakra",
    sanskritName: "Vishuddha",
    color: "#1E90FF",  // Blue
    location: "Throat area",
    element: "Sound/Ether",
    description: "Expression, communication, and truth",
    detailedDescription: "The Throat Chakra governs your ability to express yourself authentically and communicate effectively. It influences how you speak your truth, listen to others, and manifest your thoughts into the world through words and actions. This chakra also relates to finding and using your unique voice.",
    physicalAssociations: ["Throat", "Thyroid", "Neck", "Mouth", "Ears", "Voice", "Respiratory system"],
    psychologicalAssociations: ["Self-expression", "Communication", "Truth-telling", "Finding your voice", "Authenticity"],
    balancedTraits: ["Clear communication", "Authenticity", "Creative expression", "Truth-telling", "Good listening skills", "Honesty", "Clear intentions"],
    imbalancedTraits: ["Fear of speaking", "Gossiping", "Inability to listen", "Lying", "Talking excessively", "Interrupting others", "Suppressed voice"],
    overactiveSymptoms: ["Talking too much", "Interrupting", "Being overly critical", "Gossiping", "Inability to keep secrets", "Dominating conversations"],
    underactiveSymptoms: ["Fear of speaking up", "Shyness", "Weak voice", "Throat problems", "Difficulty expressing thoughts", "Keeping secrets that harm you"],
    balancedState: "When your Throat Chakra is balanced, you communicate clearly and honestly, speaking your truth with kindness and compassion. You're able to express yourself creatively while also being an attentive listener.",
    healingPractices: ["Singing", "Chanting", "Writing", "Speaking truth", "Neck stretches", "Humming", "Blue foods and objects", "Aromatherapy with eucalyptus or peppermint", "Aquamarine and blue lace agate crystals"],
    affirmations: ["I speak my truth with clarity and confidence", "I express myself creatively", "My voice matters", "I am an effective and compassionate communicator"]
  },
  {
    key: "heart",
    name: "Heart Chakra",
    sanskritName: "Anahata",
    color: "#3CB371",  // Green
    location: "Center of the chest",
    element: "Air/Love",
    description: "Love, compassion, and emotional balance",
    detailedDescription: "The Heart Chakra is the bridge between your lower (physical) and higher (spiritual) chakras. It's the center of love, compassion, forgiveness, and connection—both with yourself and others. This chakra governs your capacity to give and receive love unconditionally.",
    physicalAssociations: ["Heart", "Lungs", "Chest", "Upper back", "Blood circulation", "Immune system"],
    psychologicalAssociations: ["Love", "Compassion", "Forgiveness", "Relationships", "Self-acceptance", "Empathy"],
    balancedTraits: ["Compassion", "Self-love", "Empathy", "Forgiveness", "Openness", "Generosity", "Kindness", "Healthy boundaries"],
    imbalancedTraits: ["Jealousy", "Co-dependency", "Grief", "Fear of intimacy", "Resentment", "People-pleasing", "Isolation"],
    overactiveSymptoms: ["Codependency", "Poor boundaries", "Martyrdom", "Excessive caretaking", "Overwhelming emotions", "Jealousy"],
    underactiveSymptoms: ["Isolation", "Fear of intimacy", "Bitterness", "Resentment", "Holding grudges", "Critical of self and others"],
    balancedState: "When your Heart Chakra is balanced, you can give and receive love freely, maintain healthy boundaries, and experience deep compassion for yourself and others. You forgive easily and cultivate meaningful relationships based on mutual respect.",
    healingPractices: ["Compassion meditation", "Yoga", "Deep breathing", "Forgiveness work", "Spending time in nature", "Green foods and environments", "Aromatherapy with rose or jasmine", "Rose quartz and green aventurine crystals"],
    affirmations: ["I am open to giving and receiving love", "I forgive myself and others with compassion", "My heart is open and filled with love", "I nurture all my relationships with care"]
  },
  {
    key: "solarPlexus",
    name: "Solar Plexus Chakra",
    sanskritName: "Manipura",
    color: "#FFD700",  // Yellow
    location: "Above the navel",
    element: "Fire/Will",
    description: "Personal power, will, and transformation",
    detailedDescription: "The Solar Plexus Chakra is your center of personal power, self-confidence, and transformation. It governs your sense of identity, your self-esteem, and your ability to assert yourself in the world. This energy center relates to how you manifest your intentions and desires through willpower and action.",
    physicalAssociations: ["Digestive system", "Stomach", "Liver", "Gallbladder", "Pancreas", "Metabolism", "Adrenals"],
    psychologicalAssociations: ["Personal power", "Self-confidence", "Self-worth", "Willpower", "Self-discipline", "Ambition"],
    balancedTraits: ["Confidence", "Clear boundaries", "Self-discipline", "Personal power", "Courage", "Motivation", "Healthy assertiveness", "Good decision-making"],
    imbalancedTraits: ["Control issues", "Low self-esteem", "Anger issues", "Passivity", "Aggression", "Perfectionism", "Victimhood"],
    overactiveSymptoms: ["Dominating behavior", "Need for control", "Anger issues", "Excessive criticism", "Workaholism", "Stubbornness", "Arrogance"],
    underactiveSymptoms: ["Low self-esteem", "Indecisiveness", "Victim mentality", "Difficulty saying no", "Seeking approval", "Digestive issues", "Fatigue"],
    balancedState: "When your Solar Plexus Chakra is balanced, you feel confident in your abilities and comfortable in your identity. You can take action toward your goals, set healthy boundaries, and assert yourself appropriately in different situations.",
    healingPractices: ["Core strengthening", "Setting boundaries", "Affirmations", "Solar gazing", "Martial arts", "Yellow foods", "Aromatherapy with lemon or rosemary", "Citrine and tiger's eye crystals"],
    affirmations: ["I am confident in my abilities", "I honor my authentic self", "I have the power to create change in my life", "I stand in my personal power"]
  },
  {
    key: "sacral",
    name: "Sacral Chakra",
    sanskritName: "Svadhisthana",
    color: "#FF7F50",  // Orange
    location: "Lower abdomen",
    element: "Water/Emotion",
    description: "Creativity, sexuality, and emotional flow",
    detailedDescription: "The Sacral Chakra governs your creative and sexual energies, as well as your emotional fluidity. It influences your ability to embrace change, experience pleasure, and express yourself creatively. This chakra is connected to your sense of abundance and your capacity for joy and playfulness.",
    physicalAssociations: ["Reproductive organs", "Pelvis", "Lower back", "Hips", "Bladder", "Sexuality"],
    psychologicalAssociations: ["Emotions", "Creativity", "Pleasure", "Sensuality", "Desire", "Passion"],
    balancedTraits: ["Creativity", "Emotional fluidity", "Healthy sexuality", "Joy", "Adaptability", "Playfulness", "Passion", "Healthy boundaries"],
    imbalancedTraits: ["Emotional numbness", "Sexual issues", "Creative blocks", "Addiction", "Emotional volatility", "Possessiveness", "Self-denial"],
    overactiveSymptoms: ["Emotional overwhelm", "Attachment issues", "Sexual addiction", "Manipulative behavior", "Drama-seeking", "Excessive fantasizing"],
    underactiveSymptoms: ["Fear of pleasure", "Creative blocks", "Emotional rigidity", "Sexual repression", "Lack of passion", "Resistance to change"],
    balancedState: "When your Sacral Chakra is balanced, you embrace your emotions and express them in healthy ways. You enjoy sensual pleasures without becoming addicted to them, and your creativity flows naturally. You adapt to change with grace and find joy in everyday experiences.",
    healingPractices: ["Dancing", "Creative arts", "Movement", "Hip-opening yoga", "Emotional release work", "Orange foods", "Water therapy", "Aromatherapy with orange or sandalwood", "Carnelian and orange calcite crystals"],
    affirmations: ["I embrace my creativity and emotional nature", "I allow pleasure into my life", "I flow with life's changes", "My emotions provide valuable guidance"]
  },
  {
    key: "root",
    name: "Root Chakra",
    sanskritName: "Muladhara",
    color: "#DC143C",  // Red
    location: "Base of the spine",
    element: "Earth/Stability",
    description: "Grounding, stability, and basic needs",
    detailedDescription: "The Root Chakra forms your energetic foundation and governs your sense of safety, security, and belonging in the physical world. It connects you to the earth and influences your ability to meet your basic survival needs. When this chakra is balanced, you feel grounded, stable, and secure in your place in the world.",
    physicalAssociations: ["Spine base", "Legs", "Feet", "Bones", "Large intestine", "Adrenal glands", "Kidneys"],
    psychologicalAssociations: ["Safety", "Security", "Survival", "Basic needs", "Family", "Tribal belonging", "Physical identity"],
    balancedTraits: ["Stability", "Security", "Groundedness", "Vitality", "Physical health", "Courage", "Patience", "Dependability"],
    imbalancedTraits: ["Fear", "Anxiety", "Insecurity", "Material obsession", "Hoarding", "Restlessness", "Disconnection"],
    overactiveSymptoms: ["Materialism", "Greed", "Hoarding behavior", "Rigidity", "Resistance to change", "Excessive weight", "Sluggishness"],
    underactiveSymptoms: ["Anxiety", "Fear", "Financial insecurity", "Disconnection from body", "Feeling ungrounded", "Chronic fatigue", "Restlessness"],
    balancedState: "When your Root Chakra is balanced, you feel secure in your ability to meet your basic needs and maintain your physical well-being. You're grounded, stable, and connected to your body and the physical world around you.",
    healingPractices: ["Grounding exercises", "Walking in nature", "Gardening", "Root vegetables", "Physical exercise", "Red foods", "Aromatherapy with cedar or patchouli", "Red jasper and hematite crystals"],
    affirmations: ["I am safe and secure", "My needs are always met", "I am grounded and centered", "I am connected to the earth and my physical body"]
  }
];

// Helper function to get chakra status text and descriptions
export function getChakraStatus(value: number): { 
  status: string; 
  level: "blocked" | "underactive" | "balanced" | "overactive";
  description: string; 
} {
  if (value <= 3) {
    return { 
      status: "Blocked/Severely Underactive", 
      level: "blocked",
      description: "This chakra is significantly underactive and may be causing notable challenges in the associated areas of your life. Focused healing work is recommended."
    };
  }
  if (value <= 5) {
    return { 
      status: "Underactive", 
      level: "underactive",
      description: "This chakra is underactive, which may be causing some difficulties in the associated aspects of your life. Regular attention to this area would be beneficial."
    };
  }
  if (value <= 7) {
    return { 
      status: "Balanced", 
      level: "balanced",
      description: "This chakra is functioning well and in harmony with your other energy centers. Maintain current practices to sustain this balance."
    };
  }
  return { 
    status: "Overactive", 
    level: "overactive",
    description: "This chakra is excessively active, which may create imbalances in how you express this energy. Working to calm and harmonize this chakra would be helpful."
  };
}

// Generate overall chakra balance score and description
export function getOverallChakraBalance(chakraValues: Record<string, number>): { 
  score: number; 
  status: string;
  description: string;
} {
  if (!chakraValues || Object.keys(chakraValues).length === 0) {
    return { 
      score: 0, 
      status: "Not assessed",
      description: "Complete the chakra assessment to receive your personalized chakra balance report."
    };
  }

  // Calculate average of all chakra values
  const sum = Object.values(chakraValues).reduce((total, value) => total + value, 0);
  const avg = Math.round((sum / Object.keys(chakraValues).length) * 10) / 10;

  // Generate status and description based on overall balance
  if (avg < 4) {
    return {
      score: avg,
      status: "Significantly Underactive",
      description: "Your overall chakra system appears underactive. You may benefit from energizing practices like movement, active meditation, and connecting with your passions. Focus on gradually activating each chakra from the root upward."
    };
  } else if (avg < 5.5) {
    return {
      score: avg,
      status: "Mildly Underactive",
      description: "Your chakra system is slightly underactive. Consider incorporating more dynamic and expressive practices into your routine, like creative activities, movement, and verbal expression of feelings."
    };
  } else if (avg > 8) {
    return {
      score: avg,
      status: "Significantly Overactive",
      description: "Your overall chakra system appears overactive. You may benefit from grounding practices like meditation, deep breathing, and activities that promote calm and centeredness. Focus on quality rather than quantity in your activities."
    };
  } else if (avg > 6.5) {
    return {
      score: avg,
      status: "Mildly Overactive",
      description: "Your chakra system is slightly overactive. Consider incorporating more calming practices into your routine, like gentle meditation, mindful breathing, and activities that promote reflection."
    };
  } else {
    return {
      score: avg,
      status: "Relatively Balanced",
      description: "Your chakra system is relatively balanced overall. Continue your current practices while paying attention to specific chakras that may be either overactive or underactive to achieve greater harmony."
    };
  }
}

// Generate personalized recommendations based on chakra balance
export function getChakraRecommendations(chakraValues: Record<string, number>): {
  focusAreas: string[];
  practices: string[];
  insights: string;
} {
  if (!chakraValues || Object.keys(chakraValues).length === 0) {
    return {
      focusAreas: [],
      practices: [],
      insights: "Complete your chakra assessment to receive personalized recommendations."
    };
  }

  const recommendations: {
    focusAreas: string[];
    practices: string[];
    insights: string;
  } = {
    focusAreas: [],
    practices: [],
    insights: ""
  };

  // Identify the most imbalanced chakras (either underactive or overactive)
  const imbalancedChakras = Object.entries(chakraValues)
    .map(([key, value]) => ({ key, value, status: getChakraStatus(value) }))
    .filter(chakra => chakra.status.level !== "balanced")
    .sort((a, b) => {
      // Sort by most extreme values (furthest from balanced range of 5-7)
      const aDistance = a.value <= 5 ? 5 - a.value : a.value - 7;
      const bDistance = b.value <= 5 ? 5 - b.value : b.value - 7;
      return bDistance - aDistance;
    })
    .slice(0, 3); // Top 3 most imbalanced

  // Create focus areas
  recommendations.focusAreas = imbalancedChakras.map(chakra => {
    const chakraInfo = chakras.find(c => c.key === chakra.key);
    return `${chakraInfo?.name} (${chakra.status.status})`;
  });

  // Create recommended practices
  const practices: string[] = [];
  imbalancedChakras.forEach(chakra => {
    const chakraInfo = chakras.find(c => c.key === chakra.key);
    if (chakraInfo) {
      // Select appropriate practices based on whether chakra is overactive or underactive
      if (chakra.status.level === "underactive" || chakra.status.level === "blocked") {
        // For underactive, recommend activating practices
        const practice = chakraInfo.healingPractices[Math.floor(Math.random() * chakraInfo.healingPractices.length)];
        practices.push(`${practice} to activate your ${chakraInfo.name}`);
      } else {
        // For overactive, recommend balancing/calming practices
        practices.push(`Grounding meditation to balance your ${chakraInfo.name}`);
      }
    }
  });

  // Add general practices
  practices.push("Daily chakra scan meditation to monitor your energy");
  practices.push("Journaling about emotional and energetic patterns");

  // Generate personalized insights
  let insights = "Based on your chakra assessment, you would benefit from focusing on creating greater balance between your energy centers. ";
  
  if (imbalancedChakras.length > 0) {
    const primaryChakra = imbalancedChakras[0];
    const chakraInfo = chakras.find(c => c.key === primaryChakra.key);
    
    if (primaryChakra.status.level === "overactive") {
      insights += `Your ${chakraInfo?.name} is particularly overactive, which may manifest as ${chakraInfo?.overactiveSymptoms.slice(0, 2).join(" and ")}. `;
    } else {
      insights += `Your ${chakraInfo?.name} is particularly underactive, which may manifest as ${chakraInfo?.underactiveSymptoms.slice(0, 2).join(" and ")}. `;
    }
  }
  
  insights += "Regular practice of the recommended exercises, combined with self-reflection, will help you create greater harmony in your energy system over time.";
  
  recommendations.insights = insights;
  recommendations.practices = practices;

  return recommendations;
}
